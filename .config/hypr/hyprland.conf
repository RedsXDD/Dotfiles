# vim:fileencoding=utf-8:foldmethod=marker

# ----------------------------------------------------------------- #

# ██╗  ██╗██╗   ██╗██████╗ ██████╗ ██╗      █████╗ ███╗   ██╗██████╗
# ██║  ██║╚██╗ ██╔╝██╔══██╗██╔══██╗██║     ██╔══██╗████╗  ██║██╔══██╗
# ███████║ ╚████╔╝ ██████╔╝██████╔╝██║     ███████║██╔██╗ ██║██║  ██║
# ██╔══██║  ╚██╔╝  ██╔═══╝ ██╔══██╗██║     ██╔══██║██║╚██╗██║██║  ██║
# ██║  ██║   ██║   ██║     ██║  ██║███████╗██║  ██║██║ ╚████║██████╔╝
# ╚═╝  ╚═╝   ╚═╝   ╚═╝     ╚═╝  ╚═╝╚══════╝╚═╝  ╚═╝╚═╝  ╚═══╝╚═════╝

# ----------------------------------------------------------------- #

#: Program startup {{{
# Basics:
exec-once = waybar &
exec-once = sleep 1 && (fcitx5 & mpd & keepassxc & gammastep & transmission-daemon &)

# Polkit agent:
exec-once=/usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1

# Cliphist:
exec-once = wl-paste --type text --watch cliphist store  # Stores only text data
exec-once = wl-paste --type image --watch cliphist store # Stores only image data
exec-once = wl-clip-persist --clipboard both
# exec-once = wl-paste --watch wl-paste >> ~/.config/rofi/misc_files/clipboard # For clip-rofi script (clipboard management with rofi).

# Wallpaper:
exec-once = waybg -r # Reload previous wallpaper.
# exec-once = waybg -p ~/Pictures/wallpapers/all # Random wallpaper/colorscheme on login.
#: }}}
#: General {{{
# Remove 'default config' warning:
autogenerated = 0

# Source other config files:
source = ~/.config/hypr/hypr_wallust.conf

# Monitor:
monitor=,preferred,auto,auto

# Some default env vars.
env = XCURSOR_SIZE,24

# Blur notifications background:
layerrule = blur, notifications
layerrule = dimaround, rofi

general {
	gaps_in  = 10
	gaps_out = 30
	border_size = 0
	# layout = dwindle
	layout = master
	resize_on_border = true
	extend_border_grab_area = 15
	col.inactive_border = $background
	# col.active_border = $color4
	# col.active_border = $color6 $color4 $color4 $color6 45deg
	col.active_border = $color6 $color4 $color4 $color6 165deg
}
#: }}}
#: Decorations {{{
decoration {
	# Other options:
	rounding = 10
	# multisample_edges = true # enable antialiasing for rounded corners

	# Opacity:
	active_opacity = 1
	inactive_opacity = 1
	fullscreen_opacity = 1

	# Shadow:
	drop_shadow = true
	shadow_ignore_window = false
	# shadow_offset = 0 0
	shadow_range = 100
	shadow_render_power = 3
	shadow_scale = 1
	# col.shadow = rgba(00000088)
	col.shadow = rgba(121212ee)

	# Dim:
	dim_inactive = true
	dim_strength = 0.4
	dim_special = 0.2
	dim_around = 0.4

	# Blur:
	# blurls = waybar
	blurls = gtk-layer-shell
	blurls = lockscreen
	blur {
		enabled = true
		size = 10
		passes = 2
		new_optimizations = on
		xray = false
		ignore_opacity = true
	}
}
#: }}}
#: Animations {{{
animations {
	enabled = true
	bezier = myBezier, 0.05, 0.9, 0.1, 1.05

	animation = windows, 1, 7, myBezier
	animation = windowsOut, 1, 7, default, popin 80%
	animation = border, 1, 10, default
	animation = borderangle, 1, 8, default
	animation = fade, 1, 7, default
	animation = workspaces, 1, 6, default
}
#: }}}
#: Layouts {{{
#: Dwindle {{{
dwindle {
	pseudotile = true # Toggle with MODKEY + p
	preserve_split = true
	smart_split = false
	smart_resizing = false
	permanent_direction_override = false
	special_scale_factor = 0.5
	split_width_multiplier = 1.0
	use_active_for_splits = true
	default_split_ratio = 1.0

	# Smart gaps: 0 - disabled, 1 - no border, 2 - with border
	no_gaps_when_only = 0

	# Split direction:
	# 0 - split follows mouse
	# 1 - always split to the left or top
	# 2 - always split to the right or bottom
	force_split = 2
}
#: }}}
#: Master {{{
master {
	allow_small_split = false
	special_scale_factor = 1
	mfact = 0.55
	new_is_master = true
	new_on_top = true
	orientation = left
	inherit_fullscreen = true
	always_center_master = false

	# Smart gaps: 0 - disabled, 1 - no border, 2 - with border
	no_gaps_when_only = 0
}
#: }}}
#: }}}
#: Misc Confs {{{
misc {
	disable_hyprland_logo = true
	animate_manual_resizes = true
	enable_swallow = true
	swallow_regex = ^([Aa]lacritty|[Kk]itty)$
	layers_hog_keyboard_focus = true
}

gestures {
	workspace_swipe = off
}

input {
	kb_layout = br
	kb_variant =
	kb_model =
	kb_options =
	kb_rules =
	follow_mouse = 1
	touchpad {
		natural_scroll = false
	}
	sensitivity = 0 # -1.0 - 1.0, 0 means no modification.
}
#: }}}
#: Window rules {{{
# Workspaces rules:
windowrule = workspace 2, btop
windowrule = workspace 2, WebCord
windowrule = workspace 2, org.keepassxc.KeePassXC
windowrule = workspace 2, dolphin
windowrule = workspace 3, Librewolf
windowrule = workspace 3, LibreWolf
windowrule = workspace 4, PrismLauncher
windowrule = workspace 4, Minecraft*
windowrule = workspace 5, ncmpcpp

# Window opacities:
$OPACITY_RULE = 0.85 override 0.85 override 0.85 override
windowrule = opacity $OPACITY_RULE, ^(pcmanfm)$
windowrule = opacity $OPACITY_RULE, ^(pcmanfm-qt)$
windowrule = opacity $OPACITY_RULE, ^(org.kde.dolphin)$
windowrule = opacity $OPACITY_RULE, ^([Gg]imp-[0-9].[0-9][0-9])$
windowrule = opacity $OPACITY_RULE, ^(org.inkscape.Inkscape)$

# Tmux/Zellij:
windowrule = workspace 1, tmux
windowrule = workspace 1, zellij
# windowrule = fullscreen, tmux
# windowrule = fullscreen, zellij

# Misc:
windowrule = float, Minecraft*
# windowrule = fakefullscreen, Minecraft*
windowrule = float, Gnuplot
windowrule = center, Gnuplot
windowrule = size 75%, Gnuplot

# Picture-in-picture:
windowrulev2 = pin,      class:^([Ll]ibre[Ww]olf)$, title:^([Pp]icture-in-[Pp]icture)$
windowrulev2 = float,    class:^([Ll]ibre[Ww]olf)$, title:^([Pp]icture-in-[Pp]icture)$
windowrulev2 = center,   class:^([Ll]ibre[Ww]olf)$, title:^([Pp]icture-in-[Pp]icture)$
windowrulev2 = size 50%, class:^([Ll]ibre[Ww]olf)$, title:^([Pp]icture-in-[Pp]icture)$
#: }}}
#: Keybindings {{{
# Define MODKEY
$MODKEY = SUPER

# Toggle hyprland gamemode:
bind = $MODKEY SHIFT, G, exec, ~/.config/hypr/gamemode

# Toggle waybar visibility:
bind = $MODKEY, B, exec, killall -SIGUSR1 waybar

# Reload waybar:
bind = $MODKEY SHIFT, B, exec, killall -SIGUSR2 waybar

# Display swaync notifications:
bind = $MODKEY, N, exec, swaync-client -t

# Reload Hyprland:
bind = $MODKEY SHIFT, R, exec, hyprctl reload

# Forcefully kill windows
bind = $MODKEY SHIFT, X, exec, hyprctl kill

#: Launch programs {{{
# Launch main terminal emulator:
bind = $MODKEY,         Return,    exec, $TERMINAL
bind = $MODKEY SHIFT,   Return,    exec, $TERMINAL --class 'tmux' -e tmux
# bind = $MODKEY SHIFT, Return,    exec, $TERMINAL --class 'zellij' -e pzel

# Terminal related:
bind = $MODKEY,       KP_Begin,       exec, $TERMINAL --class 'ncmpcpp' -e ncmpcpp
bind =        ,       XF86Tools,      exec, $TERMINAL --class 'ncmpcpp' -e ncmpcpp
bind = $MODKEY,       E,              exec, $TERMINAL --class 'lf' -e lf
bind = $MODKEY,       KP_Right,       exec, $TERMINAL --class 'btop' -e ptop

# Not terminal related:
bind = $MODKEY,       KP_End,   exec,  gimp
bind = $MODKEY,       KP_Down,  exec,  webcord
bind = $MODKEY,       KP_Next,  exec,  librewolf
bind = $MODKEY,       KP_Left,  exec,  obs
bind = $MODKEY SHIFT, E,        exec,  pcmanfm
bind = $MODKEY,       KP_Home,  exec,  nwg-look
bind = $MODKEY,       KP_Up,    exec,  kvantummanager
bind = $MODKEY,       KP_Prior, exec,  themix-gui
#: }}}
#: Volume control {{{
binde =        ,       XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 1%+ # Increase volume by 1%
binde =        ,       XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 1%- # Decrease volume by 1%
binde =        ,       XF86AudioMute,        exec, wpctl set-mute   @DEFAULT_SINK@ toggle    # Mute audio
binde = $MODKEY,       equal,                exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 1%+ # Increase volume by 1%
binde = $MODKEY,       minus,                exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 1%- # Decrease volume by 1%
binde = $MODKEY SHIFT, m,                    exec, wpctl set-mute   @DEFAULT_SINK@ toggle    # Mute audio
#: }}}
#: Window management {{{
# Dwindle layout:
# bind = $MODKEY, P, pseudo,
# bind = $MODKEY, A, togglesplit,

# Master layout:
bind = $MODKEY, Space, layoutmsg, swapwithmaster
bind = $MODKEY, comma, layoutmsg, addmaster
bind = $MODKEY, period, layoutmsg, removemaster

# General actions:
binde = ALT,          F4,  killactive           # Kill active window
binde = $MODKEY ALT,  F4,  exec, hyprctl kill   # Forcefully kill any window
bind = ALT,           F11, fullscreen, 0        # Toggle fullscreen mode
bind = $MODKEY SHIFT, Q,   exit                 # Quit hyprland
bind = $MODKEY,       Z,   togglefloating       # Toggle floating mode
bind = $MODKEY,       Tab, layoutmsg, cyclenext # Select the next window
bind = $MODKEY SHIFT, Tab, layoutmsg, cycleprev # Select the previous window
bind = $MODKEY SHIFT, P,   pin                  # Pin window

# Move/resize windows with the mouse:
bindm = $MODKEY, mouse:272, movewindow
bindm = $MODKEY, mouse:273, resizewindow

# Select the window on the left/bottom/top/right:
bind = $MODKEY, h, movefocus, l
bind = $MODKEY, j, movefocus, d
bind = $MODKEY, k, movefocus, u
bind = $MODKEY, l, movefocus, r

# Move active window to the left/bottom/top/right:
bind = $MODKEY SHIFT, h, movewindow, l
bind = $MODKEY SHIFT, j, movewindow, d
bind = $MODKEY SHIFT, k, movewindow, u
bind = $MODKEY SHIFT, l, movewindow, r

# Resize active window to the left/bottom/top/right by a factior of 10:
binde = $MODKEY, Left,  resizeactive, -10 0
binde = $MODKEY, Down,  resizeactive, 0 10
binde = $MODKEY, Up,    resizeactive, 0 -10
binde = $MODKEY, Right, resizeactive, 10 0
#: }}}
#: Workspace management {{{
# Scroll through existing workspaces with MODKEY + scroll
bind = $MODKEY, mouse_up,   workspace, e-1
bind = $MODKEY, mouse_down, workspace, e+1

# Special workspace:
bind = $MODKEY SHIFT, S, togglespecialworkspace,
bind = $MODKEY,       S, movetoworkspace, special

# Switch to workspace [1-9]:
bind = $MODKEY, 1, workspace, 1
bind = $MODKEY, 2, workspace, 2
bind = $MODKEY, 3, workspace, 3
bind = $MODKEY, 4, workspace, 4
bind = $MODKEY, 5, workspace, 5
bind = $MODKEY, 6, workspace, 6
bind = $MODKEY, 7, workspace, 7
bind = $MODKEY, 8, workspace, 8
bind = $MODKEY, 9, workspace, 9
bind = $MODKEY, bracketleft, workspace, -1
bind = $MODKEY, bracketright, workspace, +1

# Move active window to workspace [1-9]:
bind = $MODKEY SHIFT, 1, movetoworkspace, 1
bind = $MODKEY SHIFT, 2, movetoworkspace, 2
bind = $MODKEY SHIFT, 3, movetoworkspace, 3
bind = $MODKEY SHIFT, 4, movetoworkspace, 4
bind = $MODKEY SHIFT, 5, movetoworkspace, 5
bind = $MODKEY SHIFT, 6, movetoworkspace, 6
bind = $MODKEY SHIFT, 7, movetoworkspace, 7
bind = $MODKEY SHIFT, 8, movetoworkspace, 8
bind = $MODKEY SHIFT, 9, movetoworkspace, 9
bind = $MODKEY SHIFT, bracketleft, movetoworkspace, -1
bind = $MODKEY SHIFT, bracketright, movetoworkspace, +1

# Move active window to workspace without following it [1-9]
bind = $MODKEY CONTROL, 1, movetoworkspacesilent, 1
bind = $MODKEY CONTROL, 2, movetoworkspacesilent, 2
bind = $MODKEY CONTROL, 3, movetoworkspacesilent, 3
bind = $MODKEY CONTROL, 4, movetoworkspacesilent, 4
bind = $MODKEY CONTROL, 5, movetoworkspacesilent, 5
bind = $MODKEY CONTROL, 6, movetoworkspacesilent, 6
bind = $MODKEY CONTROL, 7, movetoworkspacesilent, 7
bind = $MODKEY CONTROL, 8, movetoworkspacesilent, 8
bind = $MODKEY CONTROL, 9, movetoworkspacesilent, 9
bind = $MODKEY CONTROL, bracketleft, movetoworkspacesilent, -1
bind = $MODKEY CONTROL, bracketright, movetoworkspacesilent, +1
#: }}}
#: Action Menus {{{
bind = $MODKEY,       D,     exec, rofi-launch drun
bind = $MODKEY SHIFT, D,     exec, rofi-launch run
bind = $MODKEY,       W,     exec, rofi-launch window
bind = $MODKEY,       Print, exec, grimpick
bind = $MODKEY,       F1,    exec, rofi-bookmarks
bind = $MODKEY,       F2,    exec, rofibc
bind = $MODKEY,       F3,    exec, rofi-wall
bind = $MODKEY,       F4,    exec, downwalls
bind =        ,       XF86Calculator, exec, rofibc

bind = $MODKEY,       F7,    exec, rofi-mpd
bind =        ,       XF86AudioPlay, exec, rofi-mpd

bind = $MODKEY,       F9,    exec, rofi-emojis
bind = $MODKEY,       F10,   exec, rofi-nerdfont
bind = $MODKEY,       F11,   exec, rofi-kaomojis

bind = $MODKEY,       F12,   exec, powermenu
#: }}}
#: }}}
