#!/usr/bin/env sh

# The famous "get a menu of emojis to copy" script.
# Original Script by Luke Smith modified by Lewd.
# Get user selection via dmenu from emoji file.

# Use Generated Menu from DM-Core:
# shellcheck disable=SC1091
menu(){ . "$HOME"/.cache/dm-core/menu; }
# shellcheck disable=SC1091
base_file="$(cat "$HOME"/.cache/dm-core/base_file)"

emoji="$(
sed '/^#/d; s/#.*//g; /^$/d; s/\s\+§§/§§/g' < "$base_file" |
column -s '§§' -t | sort -u |
menu -p 'Select Emoji')"

[ -z "$emoji" ] && exit
echo "$emoji" | tr -d '[:print:]\n' | xclip -selection clipboard
emoji="$(echo "$emoji" | tr -d '[:print:]\n')"
notify-send -t 700 "'$emoji' Copied To Clipboard." &

