#!/usr/bin/env sh

# General Variables:
mega_folder="$HOME/MEGAsync/dots"
dest="$HOME/.cache/dot-baks"
conf="$HOME/.config"

# ==================================================================================================== #

#########
# Dots: #
#########

dots()
{
 dest_dots="$dest/dots"
 tar='dots.tar.gz'

 set -- \
 "$conf/Blockbench" \
 "$conf/alacritty" \
 "$conf/bindings" \
 "$conf/btop" \
 "$conf/cava" \
 "$conf/fastfetch" \
 "$conf/fcitx" \
 "$conf/hypr" \
 "$conf/kitty" \
 "$conf/legacy_configs" \
 "$conf/lf" \
 "$conf/mpd" \
 "$conf/mpv" \
 "$conf/ncmpcpp" \
 "$conf/nvim" \
 "$conf/obs-studio" \
 "$conf/paru" \
 "$conf/pcmanfm" \
 "$conf/rofi" \
 "$conf/rofi_base" \
 "$conf/shell" \
 "$conf/startship-presets" \
 "$conf/swaylock" \
 "$conf/swaync" \
 "$conf/tmux" \
 "$conf/vifm" \
 "$conf/wal" \
 "$conf/waybar" \
 "$conf/wlogout" \
 "$conf/zathura" \
 "$conf/zellij" \
 "$conf/pipewire" \
 "$conf/mimeapps.list" \
 "$conf/user-dirs.dirs" \
 "$conf/starship.toml" \
 "$HOME/.local/bin" \
 "$HOME/.local/sources/flexipatches-lewd" \
 "$HOME/.local/sources/suckless-lewd" \
 "/etc/vconsole.conf"

 # Mkdirs & remove old backup:
 rm -rvf "$dest_dots"
 mkdir -pv "$dest_dots"

 # Copy files:
 for file in "$@";
 do
  cp -rvf -- "$file" "$dest_dots"
  echo "$file" >> "$dest_dots"/places
 done
 unset file

 # Compress files:
 cd "$dest" || exit 1
 tar -cvzpf "$tar" "dots"
 mv -f "$dest/$tar" "$mega_folder"
}

# ==================================================================================================== #

##############
# Minecraft: #
##############

mine()
{
 main_folder="$HOME/.local/share/PrismLauncher/instances"
 dest_mc="$dest/mc"
 tar='mc.tar.gz'

 # Mkdirs & remove old backup:
 rm -rvf "$dest_mc"
 mkdir -pv "$dest_mc"

 # Copy files:
 cp -rvf -- "$main_folder" "$dest_mc"

 # Compress files:
 cd "$dest" || exit 1
 tar -cvzpf "$tar" "mc"
 mv "$dest/$tar" "$mega_folder"
}

# ==================================================================================================== #

###############
# Wallpapers: #
###############

walls()
{
 main_folder="$HOME/Pictures/wallpapers"
 dest_walls="$dest/walls"
 tar='walls.tar.gz'

 # Mkdirs & remove old backup:
 rm -rvf "$dest_walls"
 mkdir -pv "$dest_walls"

 # Copy files:
 cp -rvf -- "$main_dir" "$dest_walls"

 # Compress files:
 cd "$dest" || exit 1
 tar -cvzpf "$tar" "walls"
 mv "$dest/$tar" "$mega_folder"
}

# ==================================================================================================== #

case "$1" in
 ''|'-h'|'--help') echo 'Dumbass'; exit 1 ;;
 *)
  while getopts 'cwima' opt;
  do
   case "$opt" in
    'c') dots  ;;
    'w') walls ;;
    'm') mine ;;
    'a') dots; mine; walls ;;
    *) echo 'Program Terminated.'; exit 1 ;;
   esac
  done
 ;;
esac
