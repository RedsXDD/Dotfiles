#!/usr/bin/env sh

# Function to display various error codes:
errcode(){
	# Color Variables:
	red="$(tput setaf 1)"
	bold="$(tput bold)"
	reset="$(tput sgr0)"
	err_txt="${bold}${red}ERROR: ${reset}${bold}"
	case "$@" in
		1) echo "${err_txt}no file specified" ;;
		2) echo "${err_txt}$file couldn't be extracted via ex" ;;
	esac
	exit 1
}

# Fail if no file was specified:
[ -z "$@" ] && errcode 1

# Otherwise loop through all files specified and extract them if possible.
while [ "$1" ];
do
	file="$1"; shift
	case "$file" in
		*.tbz2 | *.tar.bz2) tar xvjf -- "$file" ;;
		*.tgz | *.tar.gz) tar xvzf -- "$file"   ;;
		*.tar | *.tar.xz) tar xvf -- "$file"    ;;
		*.tar.zst) unzstd -- "$file"            ;;
		*.bz2) bunzip2 -- "$file"               ;;
		*.gz) gzip -- "$file"                   ;;
		*.Z)  uncompress -- "$file"             ;;
		*.rar | *.zip | *.7z) 7z x -- "$file"   ;;
		*.deb) ar x -- "$file"                  ;;
		*.jar) jar -xvf "$file"                 ;;
		*) errcode 2                            ;;
	esac
done
