#!/usr/bin/env sh

# Auto generate themix/oomox theme:
oomox_theme_name='oomox-pywal'
wal_dir="${XDG_CACHE_HOME:-$HOME/.cache}/wal"
cp -f "$wal_dir"/colors-oomox "${XDG_CONFIG_HOME:-$HOME/.config}"/oomox/colors/pywal
[ -f "$wal_dir"/colors-oomox ] && oomox-cli --hidpi true --make-opts all --target-dir "${XDG_DATA_HOME:-$HOME/.local/share}"/themes --output "$oomox_theme_name" "$wal_dir"/colors-oomox

# [ -n "$(pgrep waybar)" ] && killall -SIGUSR2 waybar || waybar &
killall waybar cava swaync
while pgrep -x waybar >/dev/null; do sleep 1; done
while pgrep -x cava >/dev/null; do sleep 1; done
while pgrep -x swaync >/dev/null; do sleep 1; done
waybar & swaync &

[ -n "$TMUX" ] && tmux source-file ~/.config/tmux/tmux.conf
