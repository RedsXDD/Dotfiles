#!/usr/bin/env sh

# Copy kvantum themes to pywal theme folder:
Pywal_theme='Pywal16-pywal'
wal_dir="${XDG_CACHE_HOME:-$HOME/.cache}/wal"
Kvantum_theme_dir="${XDG_CONFIG_HOME:-$HOME/.config}/Kvantum"/"$Pywal_theme"
[ ! -f "$Kvantum_theme_dir" ] && mkdir -p "$Kvantum_theme_dir"
cp -f "$wal_dir"/"$Pywal_theme".kvconfig "$Kvantum_theme_dir"
cp -f "$wal_dir"/"$Pywal_theme".svg "$Kvantum_theme_dir"
kvantummanager --set "$Pywal_theme"

# [ -n "$(pgrep waybar)" ] && killall -SIGUSR2 waybar || waybar &
killall waybar cava swaync
while pgrep -x waybar >/dev/null; do sleep 1; done
while pgrep -x cava >/dev/null; do sleep 1; done
while pgrep -x swaync >/dev/null; do sleep 1; done
waybar & swaync &

[ -n "$TMUX" ] && tmux source-file ~/.config/tmux/tmux.conf
