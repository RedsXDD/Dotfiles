#!/usr/bin/env sh

# Script dependencies: gnutls, python-pywal, gnuplot
# shellcheck disable=1091,2154

gnuplot_config="${XDG_CONFIG_HOME:-$HOME/.config}/gnuplot/gnuplotrc"
[ -f "${XDG_CACHE_HOME:-$HOME/.cache}/wal/colors.sh" ] && . "${XDG_CACHE_HOME:-$HOME/.cache}/wal/colors.sh"

gen_config(){
	cat <<- CONF
	# Basic configs:
	set isosamples 50
	set hidden3d

	# Key, border & grid colors:
	set grid xtics ytics linetype 1 linewidth 1 linecolor rgb '$foreground'
	set border linewidth 3 linecolor rgb '$color4'
	set key textcolor rgb '$foreground'

	# Labels:
	set xlabel "X axis" textcolor rgb '$foreground'
	set ylabel "Y axis" textcolor rgb '$foreground'
	set zlabel "Z axis" textcolor rgb '$foreground'

	# Set background color:
	set terminal GNUTERM background rgb '$background'
	set object rectangle from screen 0,0 to screen 1,1 behind fillcolor rgb '$background' fillstyle solid noborder

	# Color some lines:
	set linetype 1 linewidth 2 pointtype 6 linecolor rgb '$color5'
	set linetype 2 linewidth 2 pointtype 6 linecolor rgb '$color7'
	set linetype 3 linewidth 2 pointtype 6 linecolor rgb '$color4'
	set linetype 4 linewidth 2 pointtype 6 linecolor rgb '$color6'
	set linetype 5 linewidth 2 pointtype 6 linecolor rgb '$color2'
	set linetype 6 linewidth 2 pointtype 6 linecolor rgb '$color3'
	set linetype 7 linewidth 2 pointtype 6 linecolor rgb '$color1'
	CONF
}

gen_config > "$gnuplot_config"
\gnuplot "$@"

# vim:fileencoding=utf-8:foldmethod=marker
